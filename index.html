<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>calendar</title>
	<style type="text/css">
		.calendarContainer {
			width: 350px;
			border: 1px solid black;
		}
		.calendarHead {
			text-align: center;
		}
		table {
			width: 100%;
			text-align: center;
		}
		td {
			cursor: pointer;
		}
		.todayDate {
			background-color: orange;
		}
		.disabledDate {
			color: gainsboro;
		}
		.preArrow,.nextArrow {
			font-weight: bold;
			cursor: pointer;
			/*防止点的太快箭头呈选中状态影响美观*/
			-webkit-user-select:none;
		    -moz-user-select:none;
		    -ms-user-select:none;
		    user-select:none;
		}
		.preArrow {
			float: left;
			margin-left: 20px;
		}
		.nextArrow {
			float: right;
			margin-right: 20px;
		}
	</style>
</head>
<body>
	<div class="calendarContainer">
		<div class="calendarHead">
			<botton class="preArrow">&lt;</botton>
			<span class="chooseYM">
			<select class="year">
			</select>
			年
			<select class="month">
				<option>1</option>
				<option>2</option>
				<option>3</option>
				<option>4</option>
				<option>5</option>
				<option>6</option>
				<option>7</option>
				<option>8</option>
				<option>9</option>
				<option>10</option>
				<option>11</option>
				<option>12</option>
			</select>
			月
			</span>
			<botton class="nextArrow">&gt;</botton>
		</div>
		<table>
			<thead>
				<th>日</th>
				<th>一</th>
				<th>二</th>
				<th>三</th>
				<th>四</th>
				<th>五</th>
				<th>六</th>
			</thead>
			<tbody class="calendarTbody"></tbody>
		</table>
	</div>
	<script type="text/javascript">
	//配置可选年份的上下限
		var data = {
			startYear: "1970",
			endYear: "2070"
		},
	//获取今天的年月日
			today = new Date(),
			nowYear = today.getFullYear(),
			nowMonth = today.getMonth() + 1,
			nowDate = today.getDate(),
	//获取左右切换箭头
			preArrow = document.getElementsByClassName("preArrow")[0],
			nextArrow = document.getElementsByClassName("nextArrow")[0],
	//获取年月选择框
			yearSelect = document.getElementsByClassName("year")[0],
			monthSelect = document.getElementsByClassName("month")[0],
	//获取日历的tbody
			calendarTbody = document.getElementsByClassName("calendarTbody")[0];
	//初始化日历
	function init(){
		for (var i = data.startYear; i <= data.endYear; i++) {
			yearSelect.innerHTML += "<option>" + i + "</option>";
		}
		yearSelect.value = nowYear;
		monthSelect.value = nowMonth;
		createCalendar();
	}
	init();
	//生成日历主体
	function createCalendar(){
		//得到所选择年月的1号是星期几
		var startDay = new Date(yearSelect.value,monthSelect.value-1,1).getDay(),
		//得到所选择年月的最后一天是几号
			endDate = new Date(yearSelect.value,monthSelect.value,0).getDate(),
		//得到上个月的最后一天是几号
			lastEndDate = new Date(yearSelect.value,monthSelect.value-1,0).getDate(),
		//计算每一行生成的td是否到达七个，每七个换一行
			tdsNum = 0,
		//生成的内容
			calendarTbodyHTML = "<tr>";
		//生成上个月最后几天的单元格，直到该月的一号与其的星期对应
		for (var i = 0; i < startDay; i++) {
			calendarTbodyHTML += "<td class='disabledDate'>" + (lastEndDate-startDay+1+i) + "</td>";
			tdsNum++;
		}
		//生成当月日期
		for (var i = 1; i <= endDate; i++) {
			if (yearSelect.value==nowYear&&monthSelect.value==nowMonth&&i==nowDate) {
				calendarTbodyHTML += "<td class='todayDate'>" + i + "</td>";
			}else{
				calendarTbodyHTML += "<td>" + i + "</td>";
			}
			tdsNum++;
			if (tdsNum == 7){
				if(i == endDate){
					calendarTbodyHTML += "</tr>";
				}else{
					calendarTbodyHTML += "</tr><tr>";
				}
				tdsNum = 0;
			}
		}
		//用下月的头几天日期将表格补全
		if(tdsNum!==0){
			for (var i = 1; i <= 7-tdsNum; i++) {
				calendarTbodyHTML += "<td class='disabledDate'>" + i + "</td>";
			}
		}
		//将内容加到tbody中
		calendarTbody.innerHTML = calendarTbodyHTML;
	}
	//给选择框绑定单击事件
	yearSelect.addEventListener("click",createCalendar);
	monthSelect.addEventListener("click",createCalendar);
	//给左右箭头绑定点击事件
	preArrow.addEventListener("click",function(){
		if(yearSelect.value==data.startYear&&monthSelect.value==1){
			return;
		}else{
			if (monthSelect.value == 1) {
				yearSelect.value--;
				monthSelect.value = 12;
			}else{
				monthSelect.value--;
			}
			createCalendar();
		}
	});
	nextArrow.addEventListener("click",function(){
		if(yearSelect.value==data.endYear&&monthSelect.value==12){
			return;
		}else{
			if (monthSelect.value == 12) {
				yearSelect.value++;
				monthSelect.value = 1;
			}else{
				monthSelect.value++;
			}
			createCalendar();
		}
	});
	</script>
</body>
</html>